function [E,Ex,Ey]=CalE(Q,X,Y)
x=-40:0.5:40;
y=1.5;
epsilon=8.85*10^(-12);

A=[(x-X(1))./((x-X(1)).^2+(y-Y(1)).^2);
   (x-X(2))./((x-X(2)).^2+(y-Y(2)).^2);
   (x-X(3))./((x-X(3)).^2+(y-Y(3)).^2);
   (x-X(4))./((x-X(4)).^2+(y-Y(4)).^2);
   (x-X(5))./((x-X(5)).^2+(y-Y(5)).^2);
   (x-X(6))./((x-X(6)).^2+(y-Y(6)).^2);
   (x-X(7))./((x-X(7)).^2+(y-Y(7)).^2);
   (x-X(8))./((x-X(8)).^2+(y-Y(8)).^2);
   (x-X(9))./((x-X(9)).^2+(y-Y(9)).^2);
   (x-X(10))./((x-X(10)).^2+(y-Y(10)).^2);
   (x-X(11))./((x-X(11)).^2+(y-Y(11)).^2);
   (x-X(12))./((x-X(12)).^2+(y-Y(12)).^2);
   (x-X(13))./((x-X(13)).^2+(y-Y(13)).^2);
   (x-X(14))./((x-X(14)).^2+(y-Y(14)).^2);
   (x-X(15))./((x-X(15)).^2+(y-Y(15)).^2);
   (x-X(16))./((x-X(16)).^2+(y-Y(16)).^2)];
B=[(y-Y(1))./((x-X(1)).^2+(y-Y(1)).^2);
   (y-Y(2))./((x-X(2)).^2+(y-Y(2)).^2);
   (y-Y(3))./((x-X(3)).^2+(y-Y(3)).^2);
   (y-Y(4))./((x-X(4)).^2+(y-Y(4)).^2);
   (y-Y(5))./((x-X(5)).^2+(y-Y(5)).^2);
   (y-Y(6))./((x-X(6)).^2+(y-Y(6)).^2);
   (y-Y(7))./((x-X(7)).^2+(y-Y(7)).^2);
   (y-Y(8))./((x-X(8)).^2+(y-Y(8)).^2);
   (y-Y(9))./((x-X(9)).^2+(y-Y(9)).^2);
   (y-Y(10))./((x-X(10)).^2+(y-Y(10)).^2);
   (y-Y(11))./((x-X(11)).^2+(y-Y(11)).^2);
   (y-Y(12))./((x-X(12)).^2+(y-Y(12)).^2);
   (y-Y(13))./((x-X(13)).^2+(y-Y(13)).^2);
   (y-Y(14))./((x-X(14)).^2+(y-Y(14)).^2);
   (y-Y(15))./((x-X(15)).^2+(y-Y(15)).^2);
   (y-Y(16))./((x-X(16)).^2+(y-Y(16)).^2)];

Ex=abs(Q*A./2/pi/epsilon);
Ey=abs(Q*B./2/pi/epsilon);
E=sqrt(Ex.^2+Ey.^2);
